# 第6周 — 使用 Semgrep 扫描并修复漏洞

## 作业概述
使用 **Semgrep** 对 `week6/` 中提供的应用程序运行静态分析。分类发现结果并修复至少 3 个安全问题。在你的写作任务中，解释 Semgrep 发现了哪些问题以及你如何修复它们。


## 了解 Semgrep
Semgrep 是一个开源的静态分析工具，用于搜索代码、发现错误并强制执行安全护栏和编码标准。

1. 点击 [这里](https://github.com/semgrep/semgrep/blob/develop/README.md) 了解 Semgrep。

2. 按照上面链接中的安装说明进行操作。你可以选择使用 **Semgrep Appsec Platform** 或 **CLI 工具**。


## 扫描任务

### 你将扫描的内容
- 后端 Python（FastAPI）：`week6/backend/`
- 前端 JavaScript：`week6/frontend/`
- 依赖项：`week6/requirements.txt`
- 配置/环境（用于机密信息）：`week6/` 内的文件


### 运行一般安全扫描以及针对机密信息和依赖项的重点扫描。

从 **作业仓库根目录**，运行以下命令应用包含代码和机密信息规则的精选 CI 风格捆绑包：
```bash
semgrep ci --subdir week6
```

## 任务
1. 选择 Semgrep 识别的任意 3 个问题，并使用你选择的 AI 编码工具修复它们。

2. 展示精确的编辑并解释缓解措施（例如，参数化 SQL、更安全的 API、更强的加密、净化 DOM 写入、受限 CORS、依赖项升级）。

3. 重要：确保你的修复后应用程序仍然可以运行，测试仍然通过。

## 交付物
### 1. 简要发现概述
- 总结 Semgrep 报告的类别（SAST/机密信息/SCA）。
- 注意你选择忽略的任何误报或噪声规则及其原因。

### 2. 三个修复（之前 → 之后）
对于每个修复的问题：
- 文件和行号
- Semgrep 标记的规则/类别
- 简要风险描述
- 你的更改（简短代码差异或解释，AI 编码工具使用情况）
- 为什么这可以缓解问题


## 提示
- 优先选择最小、有针对性的更改来解决根本原因。
- 每次修复后重新运行 Semgrep，以确认发现已解决且未引入新的问题。
- 对于依赖项，如果使用了供应链扫描，请记录升级的版本并链接到相关公告。


## 提交说明
1. 确保你已将所有更改推送到远程仓库以进行评分。
2. 确保你已将 brentju 和 febielin 添加为作业仓库的协作者。
3. 通过 Gradescope 提交。
