这份文档是斯坦福大学 CS146S 课程 2025 年 11 月 7 日的讲义，由 **Graphite 的 CPO Tomas Reimers** 主讲，主题聚焦于“**代码审查（Code Review）**”在 AI 时代的变革。

以下是核心内容的汇总：

### 一、为什么代码审查至关重要？

* **最高杠杆活动**：代码审查是提高工程师水平和团队代码质量最高效的手段之一。
* **显著降低缺陷**：研究显示，代码审查的错误检测率为 55-60%（远高于测试的 25-45%）。在 AT&T 的案例中，它使缺陷减少了 90%，生产力提高了 14%。

### 二、AI 时代的变化：代码审查的演进

文档探讨了随着 AI 介入，开发流程正在发生的深刻变化：

* **内部循环（Inner Loop）加速**：由于 AI 辅助编程，编写代码的速度提升了 10 倍。
* **瓶颈转移**：当代码生成速度极快时，瓶颈从“写代码”转移到了“审查代码”。
* **未来三扇门（三种模式）**：
  1. **赛博格（Cyborg）**：人类直接审查由 AI 增强的代码更改。
  2. **承包商模式**：开发者将 AI 视为第三方承包商，只负责需求审核，不看具体代码。
  3. **代理经理（EM Agency）**：开发者直接管理 AI，负责架构把关，但不一定管技术细节。

### 三、AI 代码审查工具的功能（以 Graphite 为例）

* **AI 审查代理**：自动捕捉漏洞、执行组织的代码规范、拦截安全风险。
* **智能预测 CI**：只在必要时运行 CI，节省时间和成本。
* **堆栈式拉取请求（Stacking）**：一种优化的 Git 工作流，允许作者在等待评审时继续开发而不被阻塞。

### 四、局限性与风险

* **不可推卸的责任**：即使代码是 AI 写的，最终合并和上线的责任依然在人类开发者身上，不能责怪 AI。
* **无法处理的领域**：目前的 AI 仍难以处理复杂的业务逻辑、架构决策以及某些特定的代码库惯例（Idioms）。

### 总结

这一讲的核心信息是：在 AI 生成代码泛滥的今天，**代码审查不仅没有过时，反而变得比以往任何时候都更加重要**。开发者需要从“代码编写者”转变为“代码审核者”和“架构守门员”。